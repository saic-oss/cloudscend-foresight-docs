(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{151:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/EnvFile-6be6f6ae8746b4ea9fb4075b128163a1.png"},152:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/EnvLicenseKey-489eb496df8ad9366f03085648e1ae7b.png"},153:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/files/install-prereqs-cd5a5008bee0315ab75b65e5d6789ebf.ps1"},154:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/files/configure-startup-81580174cde2a4a941750a48afc9b38c.ps1"},80:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return r})),a.d(t,"metadata",(function(){return o})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return u}));var n=a(3),i=a(7),l=(a(0),a(98)),r={id:"foresight-install-EKS",title:"Installing CloudScend Foresight to Amazon EKS",hide_title:"Installing CloudScend Foresight to Amazon EKS",sidebar_label:"Installing CloudScend Foresight v1.0.0 to Amazon EKS"},o={unversionedId:"foresight-install-EKS",id:"foresight-install-EKS",isDocsHomePage:!1,title:"Installing CloudScend Foresight to Amazon EKS",description:"Installing CloudScend Foresight to Amazon EKS",source:"@site/docs/foresight-install-EKS.mdx",slug:"/foresight-install-EKS",permalink:"/cloudscend-foresight-docs/docs/foresight-install-EKS",version:"current",sidebar_label:"Installing CloudScend Foresight v1.0.0 to Amazon EKS",sidebar:"someSidebar",previous:{title:"Introduction to CloudScend Foresight Environments",permalink:"/cloudscend-foresight-docs/docs/foresight-install-intro"},next:{title:"CloudScend Foresight Product Overview",permalink:"/cloudscend-foresight-docs/docs/foresight-ops-overview"}},s=[{value:"Assumptions for Amazon EKS Installation",id:"assumptions-for-amazon-eks-installation",children:[]},{value:"Technical Requirements for Amazon EKS Installation",id:"technical-requirements-for-amazon-eks-installation",children:[]},{value:"Installation Procedure",id:"installation-procedure",children:[{value:"Download Package",id:"download-package",children:[]},{value:"Configure Environment",id:"configure-environment",children:[]},{value:"Optionally Install Windows Report Service",id:"optionally-install-windows-report-service",children:[]},{value:"Run the Installer Script",id:"run-the-installer-script",children:[]}]},{value:"Troubleshooting and Installation Support",id:"troubleshooting-and-installation-support",children:[{value:"Installation Issues",id:"installation-issues",children:[]},{value:"Viewing logs",id:"viewing-logs",children:[]}]}],c={rightToc:s};function u(e){var t=e.components,r=Object(i.a)(e,["components"]);return Object(l.a)("wrapper",Object(n.a)({},c,r,{components:t,mdxType:"MDXLayout"}),Object(l.a)("h1",{id:"installing-cloudscend-foresight-to-amazon-eks"},"Installing CloudScend Foresight to Amazon EKS"),Object(l.a)("p",null,"This section of the Installation Guide will provide instructions for installing CloudScend Foresight v1.0.0 in an Amazon EKS environment."),Object(l.a)("h2",{id:"assumptions-for-amazon-eks-installation"},"Assumptions for Amazon EKS Installation"),Object(l.a)("ul",null,Object(l.a)("li",{parentName:"ul"},"Familiarity with Amazon EKS Environments"),Object(l.a)("li",{parentName:"ul"},"Access to functional Amazon EKS Environment"),Object(l.a)("li",{parentName:"ul"},"Knowledge of Helm files usage")),Object(l.a)("h2",{id:"technical-requirements-for-amazon-eks-installation"},"Technical Requirements for Amazon EKS Installation"),Object(l.a)("ul",null,Object(l.a)("li",{parentName:"ul"},"Kubernetes Cluster 1.15+",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"EFS as the data storage",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"Need assistance: ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"https://docs.aws.amazon.com/efs/latest/ug/troubleshooting-efs-mounting.html"}),"https://docs.aws.amazon.com/efs/latest/ug/troubleshooting-efs-mounting.html")))),Object(l.a)("li",{parentName:"ul"},"Nginx Ingress as the Ingress Controller"),Object(l.a)("li",{parentName:"ul"},"Recommend 2 m5.xlarge EC2 Workers"))),Object(l.a)("li",{parentName:"ul"},"kubectl",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"Access via command-line"),Object(l.a)("li",{parentName:"ul"},"Master permissions"),Object(l.a)("li",{parentName:"ul"},"Need assistance: ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"https://aws.amazon.com/premiumsupport/knowledge-center/eks-cluster-connection/"}),"https://aws.amazon.com/premiumsupport/knowledge-center/eks-cluster-connection/")))),Object(l.a)("li",{parentName:"ul"},"Helm v3.4.1",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"https://helm.sh/docs/intro/install/"}),"https://helm.sh/docs/intro/install/")))),Object(l.a)("li",{parentName:"ul"},"Helmfile v0.137.0",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/roboll/helmfile#installation"}),"https://github.com/roboll/helmfile#installation")))),Object(l.a)("li",{parentName:"ul"},"Foresight License Key",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"This will be provided by SAIC via email"))),Object(l.a)("li",{parentName:"ul"},"Foresight ML application key",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"This will be provided by SAIC via email\nIf processing Windows .NET Code, you must install Windows Report Service and should ensure the following requirements are met:"),Object(l.a)("li",{parentName:"ul"},"If you are using AWS: download CloudScend Foresight Windows Report Service AMI from the AWS Marketplace"),Object(l.a)("li",{parentName:"ul"},"If you are not using AWS: Reach out to SAIC service desk for CloudScend Foresight Windows Report Service app"),Object(l.a)("li",{parentName:"ul"},"Windows Server Minimum requirements:",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"Windows Server 2019 - DataCenter, Enterprise, Standard, or Core"),Object(l.a)("li",{parentName:"ul"},"1 CPU"),Object(l.a)("li",{parentName:"ul"},"2GB RAM"),Object(l.a)("li",{parentName:"ul"},"50 GB drive space on C:\\")))))),Object(l.a)("h2",{id:"installation-procedure"},"Installation Procedure"),Object(l.a)("h3",{id:"download-package"},"Download Package"),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},"Download the Installation Package"),Object(l.a)("li",{parentName:"ol"},"Examine the folder structure and ensure you have the structure and files included in the table below.")),Object(l.a)("table",null,Object(l.a)("thead",{parentName:"table"},Object(l.a)("tr",{parentName:"thead"},Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Directory Name"),Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.a)("tbody",{parentName:"table"},Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Apps"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Folder containing Helmfile configuration for CloudScend Foresight application")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"env"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Folder containing the environment file to configure the deployment")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"init"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Folder containing scripts used in the deployment")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"initial"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Folder containing Helmfile configuration for the supporting applications: ",Object(l.a)("br",null)," - Keycloak ",Object(l.a)("br",null)," - GitLab",Object(l.a)("br",null),"- SonarQube",Object(l.a)("br",null),"- Metabase")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Istio-support"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Folder containing the installation details repeated")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"README"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"README with the installation details repeated")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"foresight.sh"),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Main script file to be run to install the application")))),Object(l.a)("h3",{id:"configure-environment"},"Configure Environment"),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},"Open the license.txt file you received from SAIC via email."),Object(l.a)("li",{parentName:"ol"},"Open the foresight.env file in an editor (Notepad++, Sublime Text, Visual Studio Code, etc.)\n",Object(l.a)("img",{alt:"Env File",src:a(151).default})),Object(l.a)("li",{parentName:"ol"},"Find the environment variable LICENSE_KEY\n",Object(l.a)("img",{alt:"License Key",src:a(152).default})),Object(l.a)("li",{parentName:"ol"},"Copy the text in the license.txt file and paste it into the LICENSE_KEY value."),Object(l.a)("li",{parentName:"ol"},"Change the remaining environment variable values based on your environment.",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"You can view the ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"/cloudscend-foresight-docs/docs/foresight-env-variables"}),"list of CloudScend Foresight Environment Variables")," so you are familiar with the variables."),Object(l.a)("li",{parentName:"ul"},"Reach out to SAIC service desk if you have questions or concerns.")))),Object(l.a)("h3",{id:"optionally-install-windows-report-service"},"Optionally Install Windows Report Service"),Object(l.a)("p",null,"If you will be processing any .NET code, you must install Windows Report Service. Follow the steps below to perform the installation."),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},"Install Windows Report Service (optional)",Object(l.a)("ol",{parentName:"li"},Object(l.a)("li",{parentName:"ol"},"Install the app and dependencies (only required if not using the Report Service AMI from AWS Marketplace)",Object(l.a)("ol",{parentName:"li"},Object(l.a)("li",{parentName:"ol"},"Copy the Windows Report Service App zip file to a Windows Server 2019 machine."),Object(l.a)("li",{parentName:"ol"},"Extract the contents of the zip file to a temp folder."),Object(l.a)("li",{parentName:"ol"},"Download the ",Object(l.a)("a",{target:"_blank",href:a(153).default},"install-prereqs.ps1")," and ",Object(l.a)("a",{target:"_blank",href:a(154).default},"configure-startup.ps1")," powershell scripts to the same temp folder."),Object(l.a)("li",{parentName:"ol"},"Start an Administrator elevated Command Prompt."),Object(l.a)("li",{parentName:"ol"},"Change (cd) to the location of the zip file's extracted temp folder."),Object(l.a)("li",{parentName:"ol"},"Run ",Object(l.a)("inlineCode",{parentName:"li"},"powershell -File .\\install-prereqs.ps1"),Object(l.a)("ol",{parentName:"li"},Object(l.a)("li",{parentName:"ol"},"Content will be installed for .Net Framework 4.8, SonarScanner for MSBuild .NET, Visual Studio 2019 Build Tools, and Java 11 JDK."),Object(l.a)("li",{parentName:"ol"},"The files will be downloaded and saved to C:\\AMaaS\\temp."),Object(l.a)("li",{parentName:"ol"},"After the .Net Framework 4.8 install, the computer may reboot.\nIf it does, run ",Object(l.a)("inlineCode",{parentName:"li"},"powershell -File .\\install-prereqs.ps1")," again to make sure the installation has completed."))))),Object(l.a)("li",{parentName:"ol"},"Run ",Object(l.a)("inlineCode",{parentName:"li"},"powershell -File .\\configure-startup.ps1")," and provide the requested information.\nThis step creates a start-report-service.bat file in C:\\AMaaS with the provided values."),Object(l.a)("li",{parentName:"ol"},"To start the Windows Report Service, run ",Object(l.a)("inlineCode",{parentName:"li"},"C:\\AMaaS\\start-report-service.bat"),'.\nNote: make sure port 8080 is exposed and addressable for the "normal" Java Report Service to access.')))),Object(l.a)("h3",{id:"run-the-installer-script"},"Run the Installer Script"),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},"Open a terminal window and navigate to the top level of the installation folder"),Object(l.a)("li",{parentName:"ol"},"Type ./foresight.sh to run the script",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"Note, in Linux you may be required to change the permission of the script to Run As Admin."),Object(l.a)("li",{parentName:"ul"},"if you receive an error during installation, refer to the ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"#debugging-and-installation-support"}),"Debugging and Installation Support")," below."))),Object(l.a)("li",{parentName:"ol"},"Wait for installation to complete. This usually takes less than 30 minutes depending on your system."),Object(l.a)("li",{parentName:"ol"},"Validate by examining the cluster pods.")),Object(l.a)("h2",{id:"troubleshooting-and-installation-support"},"Troubleshooting and Installation Support"),Object(l.a)("h3",{id:"installation-issues"},"Installation Issues"),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},"WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/{username}/.kube/config",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"This is only a warning, but for security best practices this should be addressed."),Object(l.a)("li",{parentName:"ul"},"The fix is to run the following command against your kubeconfig to change its permission to readable only by the current user",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"chmod u=rw ~/.kube/config"))))),Object(l.a)("li",{parentName:"ol"},"Missing Required Environment Variables",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},"An error will be printed out with the specific missing variable"),Object(l.a)("li",{parentName:"ul"},"The fix is to set the missing variable, use the chart above or the foresight.env file for reference.")))),Object(l.a)("h3",{id:"viewing-logs"},"Viewing logs"),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},"You can view logs using kubectl")),Object(l.a)("ul",null,Object(l.a)("li",{parentName:"ul"},"Use these links for information on how to use kubectl to view your logs:",Object(l.a)("ul",{parentName:"li"},Object(l.a)("li",{parentName:"ul"},Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-running-pod/#container-exec"}),"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-running-pod/#container-exec")),Object(l.a)("li",{parentName:"ul"},Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/#interacting-with-running-pods"}),"https://kubernetes.io/docs/reference/kubectl/cheatsheet/#interacting-with-running-pods"))))),Object(l.a)("ol",{start:2},Object(l.a)("li",{parentName:"ol"},'Add "-n ',"[namespace]",'" to the end of the command to find your pod\n-For example, "kubectl -n mynamespace logs podname-1 -c optional-container-name"'),Object(l.a)("li",{parentName:"ol"},"You can also use Lens to view your logs. See information in the ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"foresight-ops-diagnostic#viewing-error-logs"}),"CloudScend Foresight Operations Guide")," for more details.")),Object(l.a)("p",null,"If you are still experience issues with your installation or need support, please contact the CloudScend Foresight service desk by phone at 1-866-411-4227 \u2013 option 3 or email ",Object(l.a)("a",Object(n.a)({parentName:"p"},{href:"mailto:foresight-support@saic.com"}),"foresight-support@saic.com"),"."))}u.isMDXComponent=!0},98:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(0),i=a.n(n);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=i.a.createContext({}),u=function(e){var t=i.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(a),b=n,m=d["".concat(r,".").concat(b)]||d[b]||p[b]||l;return a?i.a.createElement(m,o(o({ref:t},c),{},{components:a})):i.a.createElement(m,o({ref:t},c))}));function b(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,r=new Array(l);r[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,r[1]=o;for(var c=2;c<l;c++)r[c]=a[c];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);