"use strict";(self.webpackChunksage_guides=self.webpackChunksage_guides||[]).push([[550],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(n),c=l,h=d["".concat(s,".").concat(c)]||d[c]||m[c]||i;return n?a.createElement(h,r(r({ref:t},u),{},{components:n})):a.createElement(h,r({ref:t},u))}));function h(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:l,r[1]=o;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},9567:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),l=(n(7294),n(3905));const i={id:"foresight-install-EKS",title:"Installing CloudScend Foresight to Amazon EKS",sidebar_label:"Installing CloudScend Foresight v1.0.0 to Amazon EKS"},r="Installing CloudScend Foresight to Amazon EKS",o={unversionedId:"foresight-install-EKS",id:"foresight-install-EKS",title:"Installing CloudScend Foresight to Amazon EKS",description:"This section of the Installation Guide will provide instructions for installing CloudScend Foresight v1.0.0 in an Amazon EKS environment.",source:"@site/docs/foresight-install-EKS.mdx",sourceDirName:".",slug:"/foresight-install-EKS",permalink:"/cloudscend-foresight-docs/docs/foresight-install-EKS",draft:!1,tags:[],version:"current",frontMatter:{id:"foresight-install-EKS",title:"Installing CloudScend Foresight to Amazon EKS",sidebar_label:"Installing CloudScend Foresight v1.0.0 to Amazon EKS"},sidebar:"someSidebar",previous:{title:"Introduction to CloudScend Foresight Environments",permalink:"/cloudscend-foresight-docs/docs/foresight-install-intro"},next:{title:"CloudScend Foresight Product Overview",permalink:"/cloudscend-foresight-docs/docs/foresight-ops-overview"}},s={},p=[{value:"Assumptions for Amazon EKS Installation",id:"assumptions-for-amazon-eks-installation",level:2},{value:"Technical Requirements for Amazon EKS Installation",id:"technical-requirements-for-amazon-eks-installation",level:2},{value:"Installation Procedure",id:"installation-procedure",level:2},{value:"Download Package",id:"download-package",level:3},{value:"Configure Environment",id:"configure-environment",level:3},{value:"Optionally Install Windows Report Service",id:"optionally-install-windows-report-service",level:3},{value:"Run the Installer Script",id:"run-the-installer-script",level:3},{value:"Troubleshooting and Installation Support",id:"troubleshooting-and-installation-support",level:2},{value:"Installation Issues",id:"installation-issues",level:3},{value:"Viewing logs",id:"viewing-logs",level:3}],u={toc:p},d="wrapper";function m(e){let{components:t,...i}=e;return(0,l.kt)(d,(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"installing-cloudscend-foresight-to-amazon-eks"},"Installing CloudScend Foresight to Amazon EKS"),(0,l.kt)("p",null,"This section of the Installation Guide will provide instructions for installing CloudScend Foresight v1.0.0 in an Amazon EKS environment."),(0,l.kt)("h2",{id:"assumptions-for-amazon-eks-installation"},"Assumptions for Amazon EKS Installation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Familiarity with Amazon EKS Environments"),(0,l.kt)("li",{parentName:"ul"},"Access to functional Amazon EKS Environment"),(0,l.kt)("li",{parentName:"ul"},"Knowledge of Helm files usage")),(0,l.kt)("h2",{id:"technical-requirements-for-amazon-eks-installation"},"Technical Requirements for Amazon EKS Installation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Kubernetes Cluster 1.15+",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"EFS as the data storage",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Need assistance: ",(0,l.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/efs/latest/ug/troubleshooting-efs-mounting.html"},"https://docs.aws.amazon.com/efs/latest/ug/troubleshooting-efs-mounting.html")))),(0,l.kt)("li",{parentName:"ul"},"Nginx Ingress as the Ingress Controller"),(0,l.kt)("li",{parentName:"ul"},"Recommend 2 m5.xlarge EC2 Workers"))),(0,l.kt)("li",{parentName:"ul"},"kubectl",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Access via command-line"),(0,l.kt)("li",{parentName:"ul"},"Master permissions"),(0,l.kt)("li",{parentName:"ul"},"Need assistance: ",(0,l.kt)("a",{parentName:"li",href:"https://aws.amazon.com/premiumsupport/knowledge-center/eks-cluster-connection/"},"https://aws.amazon.com/premiumsupport/knowledge-center/eks-cluster-connection/")))),(0,l.kt)("li",{parentName:"ul"},"Helm v3.4.1",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://helm.sh/docs/intro/install/"},"https://helm.sh/docs/intro/install/")))),(0,l.kt)("li",{parentName:"ul"},"Helmfile v0.137.0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/roboll/helmfile#installation"},"https://github.com/roboll/helmfile#installation")))),(0,l.kt)("li",{parentName:"ul"},"Foresight License Key",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"This will be provided by SAIC via email"))),(0,l.kt)("li",{parentName:"ul"},"Foresight ML application key",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"This will be provided by SAIC via email\nIf processing Windows .NET Code, you must install Windows Report Service and should ensure the following requirements are met:"),(0,l.kt)("li",{parentName:"ul"},"If you are using AWS: download CloudScend Foresight Windows Report Service AMI from the AWS Marketplace"),(0,l.kt)("li",{parentName:"ul"},"If you are not using AWS: Reach out to SAIC service desk for CloudScend Foresight Windows Report Service app"),(0,l.kt)("li",{parentName:"ul"},"Windows Server Minimum requirements:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Windows Server 2019 - DataCenter, Enterprise, Standard, or Core"),(0,l.kt)("li",{parentName:"ul"},"1 CPU"),(0,l.kt)("li",{parentName:"ul"},"2GB RAM"),(0,l.kt)("li",{parentName:"ul"},"50 GB drive space on C:\\")))))),(0,l.kt)("h2",{id:"installation-procedure"},"Installation Procedure"),(0,l.kt)("h3",{id:"download-package"},"Download Package"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Download the Installation Package"),(0,l.kt)("li",{parentName:"ol"},"Examine the folder structure and ensure you have the structure and files included in the table below.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Directory Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Apps"),(0,l.kt)("td",{parentName:"tr",align:null},"Folder containing Helmfile configuration for CloudScend Foresight application")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"env"),(0,l.kt)("td",{parentName:"tr",align:null},"Folder containing the environment file to configure the deployment")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"init"),(0,l.kt)("td",{parentName:"tr",align:null},"Folder containing scripts used in the deployment")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"initial"),(0,l.kt)("td",{parentName:"tr",align:null},"Folder containing Helmfile configuration for the supporting applications: ",(0,l.kt)("br",null)," - Keycloak ",(0,l.kt)("br",null)," - GitLab",(0,l.kt)("br",null),"- SonarQube",(0,l.kt)("br",null),"- Metabase")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Istio-support"),(0,l.kt)("td",{parentName:"tr",align:null},"Folder containing the installation details repeated")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"README"),(0,l.kt)("td",{parentName:"tr",align:null},"README with the installation details repeated")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"foresight.sh"),(0,l.kt)("td",{parentName:"tr",align:null},"Main script file to be run to install the application")))),(0,l.kt)("h3",{id:"configure-environment"},"Configure Environment"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Open the license.txt file you received from SAIC via email."),(0,l.kt)("li",{parentName:"ol"},"Open the foresight.env file in an editor (Notepad++, Sublime Text, Visual Studio Code, etc.)\n",(0,l.kt)("img",{alt:"Env File",src:n(2071).Z,width:"1462",height:"1162"})),(0,l.kt)("li",{parentName:"ol"},"Find the environment variable LICENSE_KEY\n",(0,l.kt)("img",{alt:"License Key",src:n(3176).Z,width:"1184",height:"348"})),(0,l.kt)("li",{parentName:"ol"},"Copy the text in the license.txt file and paste it into the LICENSE_KEY value."),(0,l.kt)("li",{parentName:"ol"},"Change the remaining environment variable values based on your environment.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"You can view the ",(0,l.kt)("a",{parentName:"li",href:"/cloudscend-foresight-docs/docs/foresight-env-variables"},"list of CloudScend Foresight Environment Variables")," so you are familiar with the variables."),(0,l.kt)("li",{parentName:"ul"},"Reach out to SAIC service desk if you have questions or concerns.")))),(0,l.kt)("h3",{id:"optionally-install-windows-report-service"},"Optionally Install Windows Report Service"),(0,l.kt)("p",null,"If you will be processing any .NET code, you must install Windows Report Service. Follow the steps below to perform the installation."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Install Windows Report Service (optional)",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Install the app and dependencies (only required if not using the Report Service AMI from AWS Marketplace)",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Copy the Windows Report Service App zip file to a Windows Server 2019 machine."),(0,l.kt)("li",{parentName:"ol"},"Extract the contents of the zip file to a temp folder."),(0,l.kt)("li",{parentName:"ol"},"Download the ",(0,l.kt)("a",{target:"_blank",href:n(7792).Z},"install-prereqs.ps1")," and ",(0,l.kt)("a",{target:"_blank",href:n(7660).Z},"configure-startup.ps1")," powershell scripts to the same temp folder."),(0,l.kt)("li",{parentName:"ol"},"Start an Administrator elevated Command Prompt."),(0,l.kt)("li",{parentName:"ol"},"Change (cd) to the location of the zip file's extracted temp folder."),(0,l.kt)("li",{parentName:"ol"},"Run ",(0,l.kt)("inlineCode",{parentName:"li"},"powershell -File .\\install-prereqs.ps1"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Content will be installed for .Net Framework 4.8, SonarScanner for MSBuild .NET, Visual Studio 2019 Build Tools, and Java 11 JDK."),(0,l.kt)("li",{parentName:"ol"},"The files will be downloaded and saved to C:\\AMaaS\\temp."),(0,l.kt)("li",{parentName:"ol"},"After the .Net Framework 4.8 install, the computer may reboot.\nIf it does, run ",(0,l.kt)("inlineCode",{parentName:"li"},"powershell -File .\\install-prereqs.ps1")," again to make sure the installation has completed."))))),(0,l.kt)("li",{parentName:"ol"},"Run ",(0,l.kt)("inlineCode",{parentName:"li"},"powershell -File .\\configure-startup.ps1")," and provide the requested information.\nThis step creates a start-report-service.bat file in C:\\AMaaS with the provided values."),(0,l.kt)("li",{parentName:"ol"},"To start the Windows Report Service, run ",(0,l.kt)("inlineCode",{parentName:"li"},"C:\\AMaaS\\start-report-service.bat"),'.\nNote: make sure port 8080 is exposed and addressable for the "normal" Java Report Service to access.')))),(0,l.kt)("h3",{id:"run-the-installer-script"},"Run the Installer Script"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Open a terminal window and navigate to the top level of the installation folder"),(0,l.kt)("li",{parentName:"ol"},"Type ./foresight.sh to run the script",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Note, in Linux you may be required to change the permission of the script to Run As Admin."),(0,l.kt)("li",{parentName:"ul"},"if you receive an error during installation, refer to the ",(0,l.kt)("a",{parentName:"li",href:"#debugging-and-installation-support"},"Debugging and Installation Support")," below."))),(0,l.kt)("li",{parentName:"ol"},"Wait for installation to complete. This usually takes less than 30 minutes depending on your system."),(0,l.kt)("li",{parentName:"ol"},"Validate by examining the cluster pods.")),(0,l.kt)("h2",{id:"troubleshooting-and-installation-support"},"Troubleshooting and Installation Support"),(0,l.kt)("h3",{id:"installation-issues"},"Installation Issues"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/{username}/.kube/config",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"This is only a warning, but for security best practices this should be addressed."),(0,l.kt)("li",{parentName:"ul"},"The fix is to run the following command against your kubeconfig to change its permission to readable only by the current user",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"chmod u=rw ~/.kube/config"))))),(0,l.kt)("li",{parentName:"ol"},"Missing Required Environment Variables",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"An error will be printed out with the specific missing variable"),(0,l.kt)("li",{parentName:"ul"},"The fix is to set the missing variable, use the chart above or the foresight.env file for reference.")))),(0,l.kt)("h3",{id:"viewing-logs"},"Viewing logs"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"You can view logs using kubectl")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Use these links for information on how to use kubectl to view your logs:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-running-pod/#container-exec"},"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-running-pod/#container-exec")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/#interacting-with-running-pods"},"https://kubernetes.io/docs/reference/kubectl/cheatsheet/#interacting-with-running-pods"))))),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},'Add "-n ',"[namespace]",'" to the end of the command to find your pod\n-For example, "kubectl -n mynamespace logs podname-1 -c optional-container-name"'),(0,l.kt)("li",{parentName:"ol"},"You can also use Lens to view your logs. See information in the ",(0,l.kt)("a",{parentName:"li",href:"foresight-ops-diagnostic#viewing-error-logs"},"CloudScend Foresight Operations Guide")," for more details.")),(0,l.kt)("p",null,"If you are still experience issues with your installation or need support, please contact the CloudScend Foresight service desk by phone at 1-866-411-4227 \u2013 option 3 or email ",(0,l.kt)("a",{parentName:"p",href:"mailto:foresight-support@saic.com"},"foresight-support@saic.com"),"."))}m.isMDXComponent=!0},7660:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/configure-startup-81580174cde2a4a941750a48afc9b38c.ps1"},7792:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/install-prereqs-cd5a5008bee0315ab75b65e5d6789ebf.ps1"},2071:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/EnvFile-6be6f6ae8746b4ea9fb4075b128163a1.png"},3176:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/EnvLicenseKey-489eb496df8ad9366f03085648e1ae7b.png"}}]);